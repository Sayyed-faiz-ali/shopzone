<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Product Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body >

<%-include('nav')%>

<div class="flex flex-wrap mt-16 gap-8 items-center justify-center px-4 sm:px-6 lg:px-12">

    <div class="w-full sm:w-1/3 md:w-1/4 lg:w-[40%] h-auto bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
        <img class="w-full h-90 object-cover rounded-t-lg" src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" alt="<%= product.name %>">
    </div>

    <div class="w-full sm:w-1/2 md:w-2/3 lg:w-[30%] p-6 ">
        <h1 class="font-semibold font-mono text-2xl mb-4"><%= product.name %></h1>
        <p class="text-gray-700 mb-4"><%= product.description %></p>

        <div class="rating mb-4">
            <span class="stars" data-rating="<%= product.rating %>"></span>
            <p class="text-gray-600"><%= product.rating %> Stars</p>
        </div>

        <h1 class="text-green-800 flex items-center mb-4">
            <span class="text-xl text-zinc-800 font-mono">Price:</span>  
            <p class="text-2xl ml-2">&#8377;<%= product.price %></p>
        </h1>


        <p class="bg-orange-300 text-xl font-bold mb-4">
            <a class="w-full h-12 rounded-lg" href="/addtocart/<%= product._id %>">
                <button class="bg-orange-300 text-white rounded-lg shadow-md w-full font-mono py-2">Add to Cart</button>
            </a>
        </p>

        <form action="/payment/pay/_id%>" method="post">
            <p class="bg-yellow-300 text-xl font-bold mb-4">
                <button class="bg-yellow-300 text-white rounded-lg shadow-md w-full font-mono py-2">Buy</button>
            </p>
        </form>
    </div>
</div>





<script>
const ratingStars = document.querySelectorAll('.stars');

ratingStars.forEach((star) => {
  const rating = parseInt(star.dataset.rating);
  const maxRating = 5;

  for (let i = 0; i < rating; i++) {
    star.innerHTML += '<span>&#9733;</span>';  // Filled star
  }

  for (let i = 0; i < maxRating - rating; i++) {
    star.innerHTML += '<span>&#9734;</span>';  // Empty star
  }
});
</script>

</body>
</html>
